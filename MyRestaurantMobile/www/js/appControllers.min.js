angular
      .module('myrestaurant.controllers')
      .controller('AppCtrl', AppCtrl);

AppCtrl.$inject = ['$state', '$auth', '$rootScope', 'CartService', 'LoginService'];

function AppCtrl($state, $auth, $rootScope, CartService, LoginService){
  var vm = this;

  vm.CartService = CartService;
  vm.LoginService = LoginService;
  vm.isActive = isActive;

  //For navigation purposes
  function isActive(stateName){
    return $state.includes(stateName);
  }

}

angular
      .module('myrestaurant.controllers')
      .controller('CartCtrl', CartCtrl);

CartCtrl.$inject = ['$state', '$stateParams', 'ItemService', 'CartService'];

function CartCtrl($state, $stateParams, ItemService, CartService){
  var vm = this;

  vm.CartService = CartService;
  vm.CartService.addItem({title: 'teste', price: 314.50, description: 'Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.'}, 1);
  vm.listCanSwipe = true;
}

angular
      .module('myrestaurant.controllers')
      .controller('CategoriesCtrl', CategoriesCtrl);

CategoriesCtrl.$inject = ['CategoryService'];

function CategoriesCtrl(CategoryService){
  var vm = this;

  vm.categories = [];
  vm.error = false;

  CategoryService.getAllCategories().then(function() {
    if(CategoryService.error){
        vm.error = true;
    }
    vm.categories = CategoryService.data;
  });
}

angular
			.module('myrestaurant.controllers')
			.controller('CategoryCtrl', CategoryCtrl);

CategoryCtrl.$inject = ['$scope', '$state', '$stateParams', '$ionicLoading', 'ItemService'];

function CategoryCtrl($scope, $state, $stateParams, $ionicLoading, ItemService){
	var vm = this;

  vm.items = [];
	vm.clearSearch = clearSearch;

	vm.category_name = $stateParams.category_name;
	vm.category_id = $stateParams.category_id;

	$scope.$on('$ionicView.enter', function(e) {
			ItemService.getAllItemsByCategoryId(vm.category_id).then(function() {
		    vm.items = ItemService.data;
		  });
	});

	function clearSearch(){
		vm.searchItem = '';
	}
}

angular
      .module('myrestaurant.controllers')
      .controller('ContactCtrl', ContactCtrl);

ContactCtrl.$inject = ['$scope'];

function ContactCtrl(){
    var vm = this;
}

angular
      .module('myrestaurant.controllers')
      .controller('ItemCtrl', ItemCtrl);

ItemCtrl.$inject = ['$state', '$stateParams', 'ItemService', 'CartService'];

function ItemCtrl($state, $stateParams, ItemService, CartService){
  var vm = this;

  vm.item = [];

  vm.cart = CartService;

  var category_id = $stateParams.category_id;
  var item_id = $stateParams.item_id;

  ItemService.getItem(category_id, item_id).then(function() {
    vm.item = ItemService.data;
  });
}

angular
      .module('myrestaurant.controllers')
      .controller('LoginCtrl', LoginCtrl);

LoginCtrl.$inject = ['LoginService'];

function LoginCtrl(LoginService){
  var vm = this;
  vm.LoginService = LoginService;
}

angular
      .module('myrestaurant.controllers')
      .controller('SettingsCtrl', SettingsCtrl);

SettingsCtrl.$inject = [];

function SettingsCtrl(){
    var vm = this;
}

angular
      .module('myrestaurant.controllers')
      .controller('TranslateCtrl', TranslateCtrl);

TranslateCtrl.$inject = ['$translate', '$state', '$ionicHistory'];

function TranslateCtrl($translate, $state, $ionicHistory){
  var vm = this;

  vm.changeLanguage = changeLanguage;

  function changeLanguage (langKey) {
    $translate.use(langKey);

    $ionicHistory.nextViewOptions({
	    disableBack: true
  	});

    $state.go('app.home');

  }

}
